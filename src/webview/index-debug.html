<!DOCTYPE html>
<html>
  <head>

    <meta charset="utf-8">
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src vscode-resource: https: 'unsafe-eval'; img-src data: vscode-resource: https: 'unsafe-eval'; script-src vscode-resource: https: 'unsafe-eval' 'unsafe-inline'; style-src vscode-resource: https: 'unsafe-inline';"/> -->
    <!-- <meta http-equiv="Content-Security-Policy" content="img-src anonymous"/> -->


    
    <!-- external style for buttons interface -->
    <link rel="stylesheet" type="text/css" href="css/interface.css">

    <!-- a-frame dependencies -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
    <!-- <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-aabb-collider-component@3.2.0/dist/aframe-aabb-collider-component.min.js"></script> -->

    <!-- <script src="../../node_modules/aframe/dist/aframe-v1.0.4.min.js"></script> -->
    <!-- <script src="../../node_modules/aframe/dist/aframe-v1.2.0.min.js"></script> -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>

    <!-- <script src="../../node_modules/aframe-aabb-collider-component/dist/aframe-aabb-collider-component.min.js"></script> -->
    <script src="https://unpkg.com/aframe-aabb-collider-component@3.2.0/dist/aframe-aabb-collider-component.min.js"></script>
    <!-- <script src="https://unpkg.com/aframe-event-set-component@4.0.1/dist/aframe-event-set-component.js"></script> -->

    <!-- <script src="https://unpkg.com/aframe-outline@%5E1.1.0/build/aframe-outline.min.js"></script> -->

    <script src="https://unpkg.com/aframe-animation-timeline-component@2.0.0/dist/aframe-animation-timeline-component.min.js"></script>
    <!-- <script src="https://cdn.rawgit.com/etiennepinchon/aframe-material/master/dist/aframe-material.min.js"></script> -->


    <!-- local scripts -->
    <script src="js/helper-blocks.js"></script>
    <script src="js/helper-code.js"></script>
    <script src="js/helper-rest.js"></script>
    <script src="js/helper.js"></script>

    <!-- custom aframe components -->
    <script src="js/components/exceptions.js"></script>
    <script src="js/components/uri.js"></script>
    <script src="js/components/hint.js"></script>
    <script src="js/components/tracing.js"></script>
    <script src="js/components/dragndrop.js"></script>
    <script src="js/components/expression.js"></script>
    <script src="js/components/detachable.js"></script>
    <script src="js/components/double-click.js"></script>
    <script src="js/components/keyboardlistener.js"></script>

    <!-- experimental -->
    <script src="js/incubator.js"></script>
    <script src="js/ui/menu.js"></script>
    <script src="js/ui/inputlistener.js"></script>
    <script src="js/components/plane-rounded.js"></script>
    <script src="js/components/definition.js"></script>
    
    <script src="js/components/rope.js"></script>
    <script src="js/mapper/mappable.js"></script>
    <script src="js/mapper/mapentry.js"></script>
    <script src="js/mapper/maptree.js"></script>
    <script src="js/mapper/mapping.js"></script>
    <script src="js/ui/textarea.js"></script>
    <script src="js/ui/textinput.js"></script>

 
    <script src="js/ui/utils.js"></script>
    <script src="js/ui/input.js"></script>
    <script src="js/ui/form.js"></script>
    <script src="js/ui/dropdown.js"></script>
    <script src="js/ui/checkbox.js"></script>
    <script src="js/ui/handgrip.js"></script>
    <script src="js/ui/button.js"></script>


  <script>
    //good candidate:
    //  > https://github.com/etiennepinchon/aframe-material
    //Install (it requires nodejs/npm)
    //  > npm install http-server -g
    //Run an HTTP server where the assets are
    //  > http-server assets -p 3000 --cors
    AFRAME.ASSETS_PATH = "http://localhost:3000";
  </script>
 
    <!-- <script src="js/aframe-material.js"></script> -->


    <!-- Fonts to work with off-line -->
    <script>
      var fontRoboto        = "roboto";
      var fontSourceCodePro = "sourcecodepro";

      // var fontRoboto        = "http://localhost:80/Roboto-msdf.json";
      // var fontSourceCodePro = null;
    
    </script>

    <script src="js/index.js"></script>

  </head>


  <body onload="init()" onresize="manageUI()">

      <!-- This is the list of activities -->
      <routenav class="prev"><button class="button" onclick="nextRoute()">&lt;</button></routenav>
      <routenav class="current">Route Name</routenav>
      <routenav class="next"><button class="button" onclick="nextRoute()">&gt;</button></routenav>
      <routenav class="new"><button class="button" onclick="newRoute()" style="font-size:16px" >New<br/>route</button></routenav>
      <routenav class="export"><button class="button" onclick="getCamelSource()">Export</button></routenav>
      <!-- <routenav class="export"><button class="button" onclick="init()">Reset</button></routenav> -->
      <routenav class="import"><button class="button" onclick="importSource()">Import</button></routenav>

      <!-- These are dedicated to Web Services -->
      <routenav class="bRest"><button class="button" onclick="viewRestDefinitions()">REST</button></routenav>
      
      <!-- Experimental -->
      <!-- <routenav class="soap"><button class="button" onclick="takeScreenshot()">SOAP</button></routenav> -->

      <!-- Tracing (Experimental) -->
      <routenav class="tconfig">
        <button class=" button" type = "submit" name = "learn" value = "myimage" onclick="tracingShowConfig(true)">c</button>
      </routenav>
      <label class="lblswitch" >Tracing (on/off)</label>
      <label class="switch">
          <input id="trace-switch" type="checkbox" onclick="tracingSwitch(this)">
          <span class="slider round"></span>       
      </label>
      <div class="trace-list" >
        <ul id="myUL" class="round" >
          <!-- <li>fsdfsdf</li> -->
        </ul>
      </div>
      <!-- Needed tracing setup -->
      <script>setupTracingSwitch()</script>

      <!-- Tracing Error message -->
      <div id="tracingerror" class="tracealert" style="visibility: hidden;">
        <span class="traceclosebtn" onclick="this.parentElement.style.visibility='hidden';">&times;</span> 
        <strong>Connection failure!</strong> please review your configuration URL to Jolokia, and your target instance is running
      </div>

      <!-- Tracing configuration -->
      <div class="tracingconfig" id="tracing-config" style="visibility: hidden;"><br/>
        <font size="6">Tracing configuration</font><br><br>
        <label>Jolokia URL:</label>
        <input type="text" size="50" value="http://localhost:10001/hawtio/jolokia"><br>
        <input id="trace-body"    type="checkbox" checked onclick="this.checked?this.setAttribute('checked',''):this.removeAttribute('checked')">show message body</input><br>
        <input id="trace-headers" type="checkbox"         onclick="this.checked?this.setAttribute('checked',''):this.removeAttribute('checked')">show message headers</input>
        <button class="delete" type="submit" onclick="tracingShowConfig(false)">ok</button>
      </div>


      <!-- Categories -->
      <!-- <p class="producer">from</p> -->
      <!-- <p class="setter">set</p> -->
      <!-- <p class="consumer">to</p> -->
      <!-- <p class="rest">rest</p> -->

      <!-- FROMs -->
      <!-- <p class="producer">
        <select class="button" onchange="createSelectedFrom(this)">
          <option>from...</option>
          <option value="direct">direct</option>
          <option value="timer">timer</option>
          <option value="kafka">kafka</option>
          <option value="file">file</option>
          <option value="ftp">ftp</option>
          <option disabled>jms</option>
          <option disabled>http</option>
          <option disabled>...</option>
        </select>
      </p> -->

          <!-- SETTERs -->
          <!-- <p class="setter">
            <select class="button" onchange="createSelectedOption(this)">
              <option>set...</option>
              <option value="property">property</option>
              <option value="header">header</option>
              <option value="body">body</option>
            </select>
          </p> -->

              <!-- EIPs -->
              <!-- <p class="consumer">
                <select class="button" onchange="createSelectedOption(this)">
                  <option>eip...</option>
                  <option value="log"       >log</option>
                  <option value="direct"    >call to... (direct)</option>
                  <option value="choice"    >choice</option>
                  <option value="try-catch" >try-catch</option>
                  <option value="split"     >split</option>

                  <optgroup label="data-format: ">
                    <option value="base64"      >base64</option>
                    <option value="jacksonxml"  >xml/java (Jackson)</option>
                    <option value="json-jackson">json/java (Jackson)</option>
                    <option value="dftest">dftest</option>
                  </optgroup>

                  <option value="parallel">parallel (fork)</option>
                  <option disabled>loop</option>
                  <option disabled>filter</option>
                  <option disabled>...</option>
                </select>
              </p> -->

                  <!-- TOs -->
                  <!-- <p class="consumer to">
                    <select class="button" onchange="createSelectedOption(this)">
                      <option>to...</option>
                      <option value="direct"  >call to... (direct)</option>
                      <option value="kafka">kafka</option>
                      <option value="file">file</option>
                      <option value="ftp">ftp</option>
                      <option value="pdf">pdf</option>
                      <option disabled>jms</option>
                      <option disabled>kafka</option>
                      <option disabled>http</option>
                      <option disabled>...</option>
                    </select>
                  </p> -->

                      <!-- KIT -->
                      <!-- <p class="consumer kit">
                        <select class="button" onchange="createPredefinedSet(this)">
                          <option>kit...</option>

                            <option value="experiment-1">experiment-1</option>

                          <option value="xpath-json-to-xml">json-to-xml (xpath)</option>
                          <option value="xpath-xml-to-json">xml-to-json (xpath)</option>
                          <option value="df-json-to-xml">json-to-xml (dataFormat)</option>
                          <option value="df-xml-to-json">xml-to-json (dataFormat)</option>
                        </select>
                      </p> -->

                          <!-- REST -->
                          <!-- <p class="rest">
                            <select class="button" id="select-palette"  onchange="createSelectedOption(this)">
                              <option>rest...</option>
                              <option class="rest group" value="rest-group">new group...</option>
                              <option class="rest get" disabled value="rest-method-get">GET</option>
                              <option class="rest post" disabled value="rest-method-post">POST</option>
                              <option class="rest put" disabled value="rest-method-put">PUT</option>
                              <option disabled>DELETE</option>
                              <option disabled>PATCH</option>
                              <option disabled>OPTIONS</option>
                            </select>
                          </p> -->

      <!-- Camel Components & composites -->
      <!-- <p class="producer timer"><button class="button"  onclick="createTimer()">timer</button></p>
      <p class="producer direct-s"><button class="button"  onclick="createDirectStart()">direct</button></p> -->
 
          <!-- SETTERs -->
          <!-- <p class="setter prop"><button style="font-size:20px;" class="button" disabled onclick="createProperty()">property</button></p>
          <p class="setter header"><button class="button" disabled onclick="createHeader()">header</button></p>
          <p class="setter body"><button class="button" disabled onclick="createBody()">body</button></p> -->

              <!-- TO -->
              <!-- <p class="consumer log"><button class="button" disabled onclick="createLog()">log</button></p>
              <p class="consumer direct"><button style="font-size:16px" class="button" disabled onclick="createDirect()">call to</br>direct</button></p>
              <p class="consumer choice"><button class="button" disabled onclick="createChoice()">choice</button></p>
              <p class="consumer multicast"><button class="button" disabled onclick="createMulticast()">fork</button></p> -->

                <!-- REST -->
                <!-- <p class="rest group"><button class="button" disabled onclick="createRestGroup()">group</button></p>
                <p class="rest get"><button class="button" disabled onclick="createRestMethod({method: 'get'})">GET</button></p>
                <p class="rest post"><button class="button" disabled onclick="createRestMethod({method: 'post'})">POST</button></p>
                <p class="rest put"><button class="button" disabled onclick="createRestMethod({method: 'put'})">PUT</button></p> -->


      <!-- Configuration Panel -->
      <!-- <div class="activityconfig" id="screenshot" style="visibility: visible;"><br/> -->
        <!-- <font size="6">Configuration Pane</font> -->
        <!-- <img id="routeThumbnail-temp2" src="../media/routes-ring.jpg"> -->
      <!-- </div> -->

      <!-- Configuration Panel -->
      <div class="activityconfig" id="introconfig" style="visibility: visible;"><br/>
        <font size="6">Configuration Pane</font>
        <!-- <img id="routeThumbnail-temp2" src="../media/routes-ring.jpg"> -->
      </div>

      <div class="activityconfig" id="loginput"><br/>
        <label>Log message:</label></br>
        <!-- <input type="text" size="50" oninput="submitLogConfig()"> -->
        <div class="expression">
          <input type="text" size="50" oninput="submitLogConfig();syncEditor()">
        </div>
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
      </div>

      <div class="activityconfig" id="newDirect"><br/>
        <label>direct call to:</label>
        <!-- <select onchange="updateConfigDirect(this.value)"> -->
        <select oninput="updateConfigDirect(this.value);syncEditor()">
        </select>
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
        <br/><br/>
        <label id="hint-direct-config">To configure the call, ensure a Route exists with a 'Direct' starting activity. Then select the target route to call from the drop down list.</label>
      </div>

      <div class="activityconfig" id="config-choice-when"><br/>
        <label>expression language:</label>
        <select>
          <option>simple</option>
          <option>constant</option>
          <option>xpath</option>
          <option>jq</option>
          <option>jsonpath</option>
        </select>
        <br/>
        <input type="text" size="50" oninput="submitConfigChoice();syncEditor();">
      </div>

      <div class="activityconfig" id="name-value-pair"><br/>
        <label>Name:</label></br>
        <input type="text" size="50" oninput="submitConfigNameValuePair();syncEditor();"></br>
        </br>
        <!-- the contents of this container get dynamically configured -->
        <div class="container-expression"></div>
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
      </div>

      <div class="activityconfig" id="set-body"><br/>
        <div class="container-expression">
          <!-- this is a reusable block, needs to reside inside a 'container-expression' -->
          <div id="config-expression">
            <div class="language">
              <label>expression language:</label>
              <select id="select-lang" onchange="useExpressionLanguage(this);syncEditor();">
                <option value="simple">simple</option>
                <option value="constant">constant</option>
                <option value="xpath">xpath</option>
                <option value="method">method</option>
                <option value="tokenize">tokenize</option>
                <option value="header">header</option>
                <option value="jq">jq</option>
                <option value="jsonpath">jsonpath</option>
              </select>
              <div class="attributes" onchange="useExpressionAttribute(event);syncEditor();"></div>
            </div>
            <br/>
            <div class="expression">
              <input type="text" size="50" oninput="useExpression(this);syncEditor();">
              <select id="select-vars" onchange="useExpressionVariable(this)">
                <option>use variable...</option>
              </select>
            </div>
          </div>
        </div>
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
      </div>

      <div class="activityconfig" id="config-rest-group"><br/>
        <label>Path:</label>
        <label for="input-path">/</label>
        <input type="text" size="50" oninput="submitRestGroupConfig();syncEditor()" id="input-path">
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
      </div>

      <div class="activityconfig" id="config-rest-method"><br/>
        <label>uri:</label>
        <label for="input-uri">/</label>
        <input type="text" size="50" oninput="submitRestMethodConfig();syncEditor()" id="input-uri">
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
      </div>

      <div class="activityconfig" id="config-endpoint-to"><br/>
        <label>Target:</label>
        <input type="text" size="50" oninput="useEndpointTarget(this);syncEditor()" id="input-target">
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
        </br></br>
        <div class="config-endpoint-options" style="display: inline-block; width: 50; text-align: right;">
        </div>
      </div>

      <div class="activityconfig" id="config-dataformat"><br/>
        <div>
          <label>Transformation:</label>
          <select id="select-dataformat" onchange="useDataFormatDirection(this);syncEditor();">
            <option value="marshal">marshal</option>
            <option value="unmarshal">unmarshal</option>
          </select>
        </div>
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
        </br>
        <div class="config-endpoint-options" style="display: inline-block; width: 50; text-align: right;">
        </div>
      </div>

      <div class="activityconfig" id="config-catch"><br/>
        <label style="font-size:18px;">Catch exception/s:</label>
        <!-- <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button> -->
        </br></br>
        <div class="config-catch-options" style="display: inline-block; width: 50; text-align: right;">
        </div>
      </div>

    <!-- Spacial scene (A-Frame elements) -->
    <a-scene  inputlistener
              id="thescene" 
              myoutline 

              cursor="rayOrigin:mouse;" 
              raycaster="objects: .interactive, .testcollidable; showLine: false; near:0"

              background="color: black"

              vr-mode-ui="enabled: true" 
              screenshot="width: 512; height: 256;" 
              keyboard-shortcuts="enterVR: false">

      <a-assets>

        
          <!-- <img id="routeThumbnail" crossorigin="anonymous" src="media/routes-ring.jpg">
          <img id="camel-icon" crossorigin="anonymous" src="media/camel-origami2.png">
         -->


        <!-- <img id="routeThumbnail-temp" crossorigin="anonymous" src="../media/designer-icon.jpg"> -->
        
        <!-- <img id="routeThumbnail" src="https://github.com/brunoNetId/camel-designer/raw/master/src/media/routes-ring.jpg"> -->
<img id="routeThumbnail-temp" crossorigin="anonymous" src="https://aframe.io/images/blog/introducing-aframe.png">
        <!-- <img id="routeThumbnail" crossorigin="anonymous" src="routes-ring.jpg"> -->

        <!-- <img id="routeThumbnail" crossorigin="anonymous" src="https://github.com/brunoNetId/camel-designer/raw/master/src/media/routes-ring.jpg"> -->
<img id="routeThumbnail" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QCARXhpZgAATU0AKgAAAAgABQEGAAMAAAABAAIAAAESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUodpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAKgAgAEAAAAAQAAANigAwAEAAAAAQAAAJQAAAAA/+0AOFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAAOEJJTQQlAAAAAAAQ1B2M2Y8AsgTpgAmY7PhCfv/iD0RJQ0NfUFJPRklMRQABAQAADzRhcHBsAhAAAG1udHJSR0IgWFlaIAfiAAYAFQAJACIAAGFjc3BBUFBMAAAAAEFQUEwAAAAAAAAAAAAAAAAAAAAAAAD21gABAAAAANMtYXBwbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEWRlc2MAAAFQAAAAYmRzY20AAAG0AAAEGmNwcnQAAAXQAAAAI3d0cHQAAAX0AAAAFHJYWVoAAAYIAAAAFGdYWVoAAAYcAAAAFGJYWVoAAAYwAAAAFHJUUkMAAAZEAAAIDGFhcmcAAA5QAAAAIHZjZ3QAAA5wAAAAMG5kaW4AAA6gAAAAPmNoYWQAAA7gAAAALG1tb2QAAA8MAAAAKGJUUkMAAAZEAAAIDGdUUkMAAAZEAAAIDGFhYmcAAA5QAAAAIGFhZ2cAAA5QAAAAIGRlc2MAAAAAAAAACERpc3BsYXkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABtbHVjAAAAAAAAACIAAAAMaHJIUgAAABQAAAGoa29LUgAAAAwAAAG8bmJOTwAAABIAAAHIaWQAAAAAABIAAAHaaHVIVQAAABQAAAHsY3NDWgAAABYAAAIAZGFESwAAABwAAAIWdWtVQQAAABwAAAIyYXIAAAAAABQAAAJOaXRJVAAAABQAAAJicm9STwAAABIAAAJ2bmxOTAAAABYAAAKIaGVJTAAAABYAAAKeZXNFUwAAABIAAAJ2ZmlGSQAAABAAAAK0emhUVwAAAAwAAALEdmlWTgAAAA4AAALQc2tTSwAAABYAAALeemhDTgAAAAwAAALEcnVSVQAAACQAAAL0ZnJGUgAAABYAAAMYbXMAAAAAABIAAAMuY2FFUwAAABgAAANAdGhUSAAAAAwAAANYZXNYTAAAABIAAAJ2ZGVERQAAABAAAANkZW5VUwAAABIAAAN0cHRCUgAAABgAAAOGcGxQTAAAABIAAAOeZWxHUgAAACIAAAOwc3ZTRQAAABAAAAPSdHJUUgAAABQAAAPiamFKUAAAAA4AAAP2cHRQVAAAABYAAAQEAEwAQwBEACAAdQAgAGIAbwBqAGnO7LfsACAATABDAEQARgBhAHIAZwBlAC0ATABDAEQATABDAEQAIABXAGEAcgBuAGEAUwB6AO0AbgBlAHMAIABMAEMARABCAGEAcgBlAHYAbgD9ACAATABDAEQATABDAEQALQBmAGEAcgB2AGUAcwBrAOYAcgBtBBoEPgQ7BEwEPgRABD4EMgQ4BDkAIABMAEMARCAPAEwAQwBEACAGRQZEBkgGRgYpAEwAQwBEACAAYwBvAGwAbwByAGkATABDAEQAIABjAG8AbABvAHIASwBsAGUAdQByAGUAbgAtAEwAQwBEIA8ATABDAEQAIAXmBdEF4gXVBeAF2QBWAOQAcgBpAC0ATABDAERfaYJyACAATABDAEQATABDAEQAIABNAOAAdQBGAGEAcgBlAGIAbgDpACAATABDAEQEJgQyBDUEQgQ9BD4EOQAgBBYEGgAtBDQEOARBBD8EOwQ1BDkATABDAEQAIABjAG8AdQBsAGUAdQByAFcAYQByAG4AYQAgAEwAQwBEAEwAQwBEACAAZQBuACAAYwBvAGwAbwByAEwAQwBEACAOKg41AEYAYQByAGIALQBMAEMARABDAG8AbABvAHIAIABMAEMARABMAEMARAAgAEMAbwBsAG8AcgBpAGQAbwBLAG8AbABvAHIAIABMAEMARAOIA7MDxwPBA8kDvAO3ACADvwO4A8wDvQO3ACAATABDAEQARgDkAHIAZwAtAEwAQwBEAFIAZQBuAGsAbABpACAATABDAEQwqzDpMPwAIABMAEMARABMAEMARAAgAGEAIABDAG8AcgBlAHMAAHRleHQAAAAAQ29weXJpZ2h0IEFwcGxlIEluYy4sIDIwMTgAAFhZWiAAAAAAAADzFgABAAAAARbKWFlaIAAAAAAAAHHAAAA5igAAAWdYWVogAAAAAAAAYSMAALnmAAAT9lhZWiAAAAAAAAAj8gAADJAAAL3QY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA2ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKMAqACtALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t//9wYXJhAAAAAAADAAAAAmZmAADypwAADVkAABPQAAAKDnZjZ3QAAAAAAAAAAQABAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAAAAAAEAAG5kaW4AAAAAAAAANgAAp0AAAFWAAABMwAAAnsAAACWAAAAMwAAAUAAAAFRAAAIzMwACMzMAAjMzAAAAAAAAAABzZjMyAAAAAAABDHIAAAX4///zHQAAB7oAAP1y///7nf///aQAAAPZAADAcW1tb2QAAAAAAAAGEAAAoC4AAAAA0OXf8AAAAAAAAAAAAAAAAAAAAAD/wAARCACUANgDARIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9sAQwACAgICAgIDAgIDBAMDAwQFBAQEBAUHBQUFBQUHCAcHBwcHBwgICAgICAgICgoKCgoKCwsLCwsNDQ0NDQ0NDQ0N/9sAQwECAgIDAwMGAwMGDQkHCQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0N/90ABAAb/9oADAMBAAIRAxEAPwD+f+igAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKAP/9D+f+igAooAKKACigAooAKKACigAooAKKACigApQCxAAyT0AoASpPKbjJUZ/wBofrzxQBHT2Rl5I4zjI5H5jigBlFABRQAUUAFFABRQAUUAFFABRQAUUAFFABRQAUUAFFABRQB//9H+f+igAooAKKACigAooAKKACigAooAKKAFAJOBXQeFNNh1nxLpej3BIjv722tWI4O2eVEb/wAdJppXJlJRV2fY/wCz7+zXpmv6Tb+N/H8bT2l0FlsNPDFFmjHImmIwSjH7qDgjluuB996daMWttI0uEu3yW1vBGOTjCoij14wBXWsPY8SeaJvR2Rl2fhXwzpNmljp2kWNtbou1Yo7eNVC+mNtX5ZpSudjsN/l5VGbL/wBwYH3v9nr7VpGk+pyV8wh9lnhfxF+AHw78b2czxWMWjamQSl9YxiM7+P8AWxjCSKcc5GcdCK9ZnTVLy2vbmwtJZodOXddMo/1IwT8wJDZwCSACQBkjHNaOlG2qOJY6un+7k0fjT428G6v4F8Q3Ph7WUCzwEFWXlJY2+7Ih7o3buDkHkV9b/tKaVbaz4di8QAAT6XMqF+u6G4IUr+DbWHX9a461Ll1R9FgMc63uVFqfDdFc56YUUAFFABRQAUUAFd14C+HXir4j6v8A2P4Xs2uZECtNITshgRjgPLIchR1wOWOOAezSb2FKSWrOFr9BtE/Ysslts+IvEjmdudljbKI045G6Uszc98D6VSg2ZPEU11Pz5r7O8d/sgeItGtJdQ8H6imtLGCxtZIxb3O0D+AgmOQ+3yn0NHs5ErFUr25j4xqa4t5rWeS2uEaOWJmR0dSrKynBVgeQQeCDyKg6CGigAooAKKACigD//0v5/6KACigAooAKKACigAooAKKACnxxvK6xxqWZiFUKMkk9AAOpNADK9m8K/Df7l/wCIhgfeS1B6/wDXQj/0Efj6UAcx4F0LW5tUtddsYgI7CeO4WSQ7Vd4HVwq9ySVxnoK+ko7a1srSO4vGFpaAYiVFHmSgfwwpwMerHCj36VSutRSUXpI+2/DnxAW1u9L8S2YWbyJYbyONyVVypDbWI5Hoe4r4z0j4k2WjlodSj+yaYGAjdWZzDk4y5PLAk5JA49MV2xxCe58ziMnlB81NXX4n3xp/xmh0mOPTYrA22n+bPv8ALupZpUjuXMkhQEIDMHPyS8Oi/KtfMtlf2Wp26Xen3Ed1DIMrJE4dSPqDWnPc4fY8ujR7Vr/xau9S1HWJbazR7e8nkksWnbbNa+ZbG0ZmKD9+zRsx+c5BPUgYrzjTbLTzHLqWuXcdjp9v/rJJGClj6L3+uAT6c1Lka06UpP3UeGfGu7hs/h3ewOV3XL29vErdzvB49wqk1V+NqW3jXdo+l262dvp2Wsj3mdh/rXIzlZF4XrgHPXIHNVqJqyPZwGClCXtZnw4Tkk+pqSeCW2me3nQpJGxVlPUMOCK5z1yKigAooAKKAL2m2Fzqd/b6fZp5s9zKkMSZxvkkYIi9R1YgV6B8HJLWL4l+HJLzb5a6lA3zdMjdt/8AHsVcI3kkY16jp03NLZH6s/C/wDpPw18JWnh3TkTz1USXtwq4a4uWA3u3fGeFGflUACvQ/CuoaJcahPHrE1vFFJYXqQvdMUiW7aP9wWYA7cP0ODg13+yWyPlf7RlJ3mPaRAnvXoXh3Sfh3q72Onm8W6vmijM6reyRxsQUFy8jCLEIiyxhC5EoALEdaFRSdy5ZlJx5Ujy2aUYJPT1put6/4Zi8J30NhJZy3H23Zb+ftXUliSQ75SyFleN1wkaAgbMu/wA2BWiikcU6tSZ+df7Wfg6wtNYtPGmnKsR1FjbXiqAA06KWSTgfeZAVb12itz9pPVY7jwnaxyctJfps9fkRix/L+dcmJS3R7mTTqK9OWx8OUVyHvBRQAUUAFFAH/9P+f+igAooAKKAAAk4Fez/BX4ew+OvEjNqQJ0zTVWa6UcGQsSI4s9g5BLH+6Md68vNc4w2XUva4l+i6v0OHHZhRwkOes/RdWcf4X+HfjDxgPM0HTJrmEEBpziOEc4P7xyFOMchckelfqBZ2lpZ20dnaRpb28CBIoo1CIiqOAqjgAV+e4nxDrybWGpJL+87/AJWPlqvFdWT/AHMEl5/0j4Auf2dviLBbtMltbTMBkRx3S7z7Dcqr+tffkmM8dK8+PHuZJ3ai/k/8zzJcXYyL2j9z/wAz8v5fh94tttWGjXunTWlxjJM67I9oxlg4yrAZ/hJr9H9Tm0+VTBqMC3Vsw2yRt1we6nqrDqpHevfy7j1zko4ulZd4v9H/AJnpYHjDnly4inbzX+T/AMz5K8K+CbDQShhQ3d/JhfN25bJ/hjXt/P1rufF0x0C5fTtJYraTx71vGP76eM9VJGBGFPDKvJ4JPOK/QMLiqOJp+1oyuv63PsaGJp14c9J3RWvL2y0fKOI7y9H/ACyzughP/TQjiRx/cB2j+InpXgeveNI4Q1po5DvjBn/hX/cHf69K6L9je3c6/wAS+LI7V3utSma5u5AMR5G4gdPZVHYYAHYV4FLNLPI0szF3Y5ZmOST7mkBqatrd9rE3mXL4RTlI14VPoO59zzWPQBfs9U1DT9xsbmW3LdTFI0efrtIzVCncTSe56R4R8a3lpqax6xcyTwTkLvmdpDE3ZgWJwD0P4V5vSGtNj7hs2XVLVLAc3EQJtG/vqfmaAn35aP3yvQivEfh14rNzGujXshE8IBgcnBZV5Az/AHl7d8fSncXoJ8RvCouYm8QWCfvIx/pKgYLIOj/Veh9vpXt94q6jbtqSKDKCFvUA43NwsoH92Tow7P7Gi3Yd+58PV6nrvw41y51dh4T0271O3mYkLZW8k/ktnlGKKVGD0yRx16UWYPTc8srptX8G+KtAIGt6Rfaflwim6tpIgzHoAzKFJPsaLMSaexzSqWOAMk1794K8CJpYj1LVkEl62DHFjcIienAzuc+3ToOaQ7FHwL4HksJYNf1ddtxEyTW0Lf8ALNkIZXk98gYXt354Htdzcw+Hl3yYfUuy8MtqfcchpvQchO+TTtYW+h9JJqpuNLg1ex+QOqC6tWYGW1mYZ2sOoVuq55wa+Btc+JGp6DeSHQrt475+JnU7lCk5IcNkOx984znrXTHEPZnk18pjJ3pux90S6tcSjDYI9+a+Irf9ofxZHAUuLOwmkxw+x0/EqGIP4Yq/bxOJ5VWXRH2Tc3m2N57qUJHGCzsxwqgdST0Ar89vFfxN8W+MI/s2qXQS14JtrdfKhJHcjJLf8CJHtUOuuhvSymf23Y3fi948j8Za8sOnNnTdPDR27c/vWbG+THGM4wvsM968i68mueU3J6nr0MPClHlgFFSbBRQAUUAFFAH/1P5/6KACigAooA+2P2Y5IP8AhHNYRSPOF7EWHfYYV2/rmvnn4UePD4H18y3G77BfKIboL1UA5ST1Owk5H90n0FfBcZ5BiMaoYjD6uN01+N0fIcT5RXxKjWoa8u6/yP0mga3ZZjPL5YRAVPXksB0HXivKj4ihuoUnt5FljkUMjqcqwPQgjtX5fLLat+V3Vj4rD0pU+aNSHNdW1vprvpr5Hpd9d6bHcQ24UlHlmRm80j5Y87T6DNeOXF9JNkDgVtTyyy956npRnT9pGbpRsnJtWWqey2v7vQ39Yv7NraIwEi4lSOQpuLBQwO4HIwMcYxz61yOcn6130sNGDujSU6bpRpqnFNJXaVm2t27aa9rHkPxm3jw5ayrIUP2vYwBIDK6NkY78gH8K474w+JYL68g8P2jB1smMk7DkecwwFB9VUnPua/QeEsJXg51paQat6+Z9Lw9h6sXKq9ItfeeJUV9ufUhRQAUUAFFABRQBPbXE1pPHc27lJI2DKw6gio4zhw3pz+XNAH6Efs/+F5fiHanxLrMTw6XbF7WWErhb6UriRORzAuRuxyzcZG05+gvgrbWmkfCPwvFZoqodLhuXC8BpJ182Q/Usxz711wo6JnjYnMVzumtLHrdlZWun2qWlhDHbW8QCpFEoRFA6AAACu9/4QLWbnV9R0bTJoZnsrpLOPzcwtczvbi52RjBAIjySWIXjGcnFX7ORg8ZSs77nm+o21rfW72l9ElzBINrxyqHRgexDZFdtN4KuLfWbXSdRvoUS+hnkt7m2Uzo0kKSv5ZRtjr/qWBYrtHGCc4raNO255lbFXfunwj8TPCtr4BJ1bw9Ey21y/ljLbvsTMOBFnkBzwGJJTovXI634rzxa74M1Wzc4E1jI6nP3WCb1OfYisq1KNrxO7Lswq8yhVd0/wPgTxb4zfe9jpz5l5Eko6J6qp/vep7fWvKm6/rXAfSiEliSeSaSgAooAKKACigAooAKKACigAooA/9X+f+igAooAKKACigDtfDXjzX/C4EFlKJbXOTbzDdHz129Cp+hx7VxVctfA4ev/ABoJ/I562Eo1f4kUz6Bh+NylD9o0n5x/cn4J/Fcivn6vOlw5l7/5d/i/8zieS4N/Y/F/5nrOvfFzX9Vga10+NNOjcbWMTF5SD1w5Ax+Az715NXTQyfBUnenTV/v/ADOilluFpu8IL8/zHMzOxZjkmm16R2hRQAUUAFFABRQAUUAOU7WB64PSm0AfpN+zv8SrbVfAVroM8qm70VfsrxnqYOfKbGTwV+X6g1+fHhvxLq/hTVI9W0acwzx8HjKOh6o6/wASnuPxBBrppYjlVmeRjcqjWl7SDsz9n7r4l+IZo2SXV7yRXjWFg07ENGpyqHnlQex+nTivgfQv2hdAvIVTXrO4s5wPmaH9/Efp0cZ9COPWuj28WeRLK60d4n2j4p+JGveItVXWb67LX0cK28csI8opEoYBV2nIHztnnnJr4y1r9oLwzZwsNGtLm+mI+XzQIIgfcnLfkKl113Lhl1ZvSJ2Hxi8VRaD4NvEdwLrUkazt0BwcOMOwwOAiZOfXA718WeKvFuteMdSOp6zNvfG1EUbY4k/uovYfmT3NYVK19EethMu9nLnnucyTk5FJXOeqFFABRQAUUAFFABRQAUUAFFABRQB//9b+f+igAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKAP/9f+f+igAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKAP/9D+f+igAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKACigAooAKKAP/9k=" alt="" />


        <!-- <a-mixin
          id="uigroup"
          geometry="primitive: plane; width: 1.5783552; height: 0.8192"
          material="color: grey; shader: flat; opacity: 0.5;"
          animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
          animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave"
         ></a-mixin> -->

         <a-mixin
         id="uigroup"
         geometry="primitive: plane; width: .6; height: 0.6"
         material="color: grey; shader: flat; opacity: 0.4;"
         animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
         animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave"
        ></a-mixin>

        <!-- <a-mixin
        id="dataformat"
        geometry="primitive: cone"
        material="color: grey; shader: flat; opacity: 0.4;"
        animation__geometry="property: opacity; to 0.0; dur: 2000; startEvents: mouseenter"
       ></a-mixin> -->


       <a-timeline id="timelineExchange">
        <a-timeline-animation select=".exchange" name="receive"></a-timeline-animation>
        <a-timeline-animation select=".exchange" name="merge"></a-timeline-animation>
        <a-timeline-animation select=".exchange" name="return"></a-timeline-animation>
      </a-timeline>

      <a-timeline id="timelineChoice">
        <a-timeline-animation select=".exchoice" name="receive"></a-timeline-animation>
        <a-timeline-animation select=".exchoice" name="route1"></a-timeline-animation>
        <a-timeline-animation select=".exchoice" name="branch1"></a-timeline-animation>
        <a-timeline-animation select=".exchoice" name="receive"></a-timeline-animation>
        <a-timeline-animation select=".exchoice" name="route2"></a-timeline-animation>
        <a-timeline-animation select=".exchoice" name="branch2"></a-timeline-animation>
      </a-timeline>


        <!-- <canvas id="cam2"></canvas> -->

      </a-assets>

      <!-- BEGIN INPUTS/KEYBOARD -->
      <!-- <a-keyboard physical-keyboard="true"></a-keyboard> -->
      <!-- <a-input class="interactive clickable" position="-0.7 1 -2.5" placeholder="Username" color="black" width="1"></a-input> -->
      <!-- <a-input position="-0.7 0.8 -2.5" type="password" placeholder="Password" color="black" width="1"></a-input> -->
      <!-- END INPUTS/KEYBOARD -->

      <!-- Entity to accommodate route definitions -->
      <a-entity id="route-definitions" keyboardlistener>
        <a-entity id="route1" route="" class="interactive" position="0 0 0">
        </a-entity>
      </a-entity>

      <!-- Entity to accommodate REST definitions -->
      <a-entity id="rest-definitions" visible="false" position="0 100 0">
      </a-entity>

      <!-- <a-sky color="black"></a-sky> -->


      <!-- <a-entity id="rig" > -->
      <a-entity id="rig" 
                wasd-controls="wsAxis:y; wsInverted:true">

        <a-camera id="main-camera" look-controls-enabled="false" position="0 0 0"   wasd-controls-enabled="false"></a-camera>
        <!-- <a-camera id="map-camera"  look-controls-enabled="false" position="0 0 0" wasd-controls-enabled="false" active="false"></a-camera> -->
        
        <a-entity rotation="90 0 0" laser-controls="hand: left" ></a-entity>
        <a-entity rotation="90 0 0" id="myvrcontroller" laser-controls="hand: right" raycaster="objects: .interactive"></a-entity>

      </a-entity>



      <!-- EXPERIMENTA START -->

<!--   
      <a-box color="green" id="cube1" class="interactive" mappable position="-2 0 0">
      </a-box> -->

      <!-- <a-form handgrip position="-1 0 -2.5" scale="2 2 2">
        <a-plane-rounded opacity=".2" width="1" height="2" radius="0.05" color="grey">
          <a-map-entry id="map-src-1" value="A" position=".1 1 0" width=".4" onclick="console.log('new element');this.components.mapentry.trigger(event)"></a-map-entry>
        </a-plane-rounded>
      </a-form> -->

    <!-- <a-entity handgrip position="-3 3 2">
      <a-map-entry id="map-src-1" value="A" position=".35 -.3 0" width=".4" onclick="console.log('new element');this.components.mapentry.trigger(event)"></a-map-entry>
    </a-entity>
    <a-entity handgrip position="-4 -2 2">
      <a-map-entry id="map-src-2" value="A" position=".35 -.3 0" width=".4" onclick="console.log('new element');this.components.mapentry.trigger(event)"></a-map-entry>
    </a-entity> -->


    <!-- <a-entity handgrip position="2 1 2">
      <a-map-entry id="map-dst" value="B" position=".35 -.3 0" width=".4" onclick="console.log('new element');this.components.mapentry.trigger(event)"></a-map-entry>
    </a-entity> -->


    <!-- <a-button value="JSON" width=".4" position="-4 0 3" onclick="testMapTreeJson()"></a-button>
    <a-button value="XML" width=".4" position="-4 -1 3" onclick="testMapTreeXml()"></a-button> -->

    <!-- <a-button value="MAP camera"  width=".4" position="-5 -1 3" onclick="document.querySelector('#map-camera').setAttribute('camera', 'active', true)"></a-button> -->
    <!-- <a-button value="MAIN camera" width=".4" position="-5 99 3" onclick="enableRouteView(event)"></a-button> -->


      <!-- <a-text color="orange" id="cube2" dragndrop="standalone: true" position="3 1 0" value="field-1" scale="2 2 2"></a-text> -->

      <!-- <a-box color="red" id="cube3" dragndrop="standalone: true" position="3 -1 0"
            animation__mouseenter="property: components.material.material.color; type: color; to: blue; startEvents: mouseenter; dur: 500";
            animation__mouseleave="property: components.material.material.color; type: color; to: red; startEvents: mouseleave; dur: 500";
      ></a-box> -->

      <!-- <a-rope start="cube1" end="cube3"></a-rope> -->

      <!-- <a-box position="2.7 0 0"></a-box>
      <a-entity handgrip id="test-ta" position="0 0 0" scale="2 2 2">
             <a-textarea rotation="0 0 0" scale="1 1 1" position=".6 .25 0" cols="20" rows="2" textvalue="this is a multiline textarea" colortext="white" colorbackground="blue" colorbackgrounddisabled="grey" disabled="false"></a-textarea>
      </a-entity> -->

      <!-- EXPERIMENTA END -->

      <!-- <a-text color="orange" id="cube2" value="field-1 fsdfsdf fsdfs sdfsdf sdfsdf sdfsdf sdfsdf fsdfsd dfsdf sd fds dd ssdsdfs gsdgsgdf sgdfsgsg" scale="1 1 1"></a-text> -->
      <!-- <a-entity>
      <a-entity>
      <a-entity>
        <a-entity>
        <a-entity>
        <a-entity>
        <a-entity>
        <a-entity>
        <a-entity>
          <a-entity>
      <a-text id="cube2" value="super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper "></a-text>
    </a-entity>
    </a-entity>
    </a-entity>
    </a-entity>
    </a-entity>
    </a-entity>
    </a-entity>
    </a-entity>
    </a-entity>
  </a-entity> -->

  <!-- <a-textarea position="-2 -2 -2"></a-textarea> -->
  <!-- <a-entity handgrip position="2 1 2"> -->

    <!-- <a-map-entry id="map-dst" value="B" position=".35 -.3 0" width=".4" onclick="console.log('new element');this.components.mapentry.trigger(event)"></a-map-entry> -->
    <!-- <a-map-entry ></a-map-entry> -->
  <!-- <a-entity mapentry></a-entity> -->


    <!-- </a-entity> -->
  <!-- <a-entity mapentry> -->
  <!-- <a-text value="super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper "></a-text> -->
  <!-- </a-entity> -->
  <!-- <a-entity id="to-8-mapping"><a-map-tree tree="{&quot;name&quot;:&quot;json data&quot;,&quot;datamodel&quot;:{},&quot;custom&quot;:{&quot;json data&quot;:{&quot;prefix&quot;:&quot;new&quot;,&quot;recursive&quot;:true}}}" istarget="true" processvars="true" position="" maptree="" id="to-8-mapping-target" geometry="" material="" class="interactive" clickable="" dragndrop="" handgrip=""></a-map-tree></a-entity> -->


  <!-- <a-entity mapentry> -->
    <!-- <a-text wrap-count="100" value="super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper super duper " text=""></a-text> -->
  <!-- </a-entity> -->

    <!-- <a-entity id="testtext"
              position="0 0 0" 
              geometry="primitive: plane; height: auto; width: auto"
              material="color: blue"
              text="width: 5; value: not a long text">
    </a-entity> -->



    <!-- Secondary camera, set above the objects, looking down, with camrender -->
    <!-- <a-entity camera="active: false" camrender="cid: cam2" position="0 1.6 5" rotation="0 0 0">
    </a-entity> -->

    <!-- Screen for showing the secondary camera, with canvas-updater -->
    <!-- <a-plane position="0 -4 -2.01" rotation="0 0 0" width="4.2" height="3.2"></a-plane>
    <a-plane position="0 -4 -2" rotation="0 0 0" width="4" height="3"
      material="src:#cam2; opacity: .95" canvas-updater></a-plane> -->

  </a-scene>

  </body>

  <script>
    var html = `
          <a-form handgrip="active: false" id="ui-route-rename" position="-1 0 -2.5">
            <a-plane-rounded opacity=".5" width="2" height="1" radius="0.05" color="grey">
            </a-plane-rounded>
            <a-entity scale=".3 .3 .3">
              <a-text font="roboto" align="center" position="3.5 2.5 0" scale="2 2 2" value="Rename Route"></a-text>
              <a-text   position="1 1.25 0" value="Name: "></a-text>
              <a-input  position="2   1.25 0" width="3" value="value 1"></a-input>
              <a-button value="apply" position="5.6 1.25 0" onclick="renameActiveRoute(this.previousElementSibling.getAttribute('value'));this.parentEl.parentEl.components.form.setActive(false)"></a-button>
            </a-entity>
          </a-form>

          <a-form handgrip="active: false" id="ui-config-aggregate" position="-1 -1.5 -2" active="false">
            <a-plane-rounded id="3d-config-aggr" opacity=".5" width="1.7" height="1" radius="0.05" color="grey">
            </a-plane-rounded>
            <a-entity scale=".3 .3 .3">
              <a-text     position="1.1 2.5 0" value="Expression language: "></a-text>
              <a-dropdown position="3.8 2.5 0" 
                          menu='{"name":"uidropdown","label":"testmenu","class":"ui","enabled":true,"menu":[{"label":"simple","function":"createHeader"},{"label":"constant","function":"createProperty"},{"label":"xpath","function":"xpath"}]}'></a-dropdown>
  
              <a-checkbox position="4.5 2.5 0" width="1" name="stuff" label="saxon" checked="false"></a-checkbox>
              <a-input position="1 2 0" placeholder="Username" color="black" width="4" value="value 2"></a-input>
              
              <a-text align="right" position="2 1.25 0" value="strategyRef"></a-text>
              <a-input position="2.1 1.25 0" placeholder="Username" color="black" width="2" value="value 1"></a-input>

              <a-text  align="right" position="2 0.75 0" value="completionSize"></a-text>
              <a-input position="2.1 0.75 0" placeholder="Username" color="black" width="2" value="value 2"></a-input>
            </a-entity>
          </a-form>

          <a-form handgrip="active: false" id="ui-config-atlasmap" position="-1 -1.25 -2" active="false">
            <a-plane-rounded id="3d-config-amap" opacity=".5" width="1.8" height=".6" radius="0.05" color="grey">
            </a-plane-rounded>
            <a-entity scale=".3 .3 .3">           
              <a-text     position="1.1 1.5 0" value="ADM file: "></a-text>
              <a-dropdown position="3.1 1.5 0" width="2"
                          menu='{"name":"dd-atlasmap","label":"atlasmapmenu","class":"ui","enabled":true,"menu":[{"label":"demo.adm"}]}'></a-dropdown>

              <a-button enabled="false" value="Edit" position="5.0 1.5 0" onclick="atlasMapAdmEdit()"></a-button>
              <a-button enabled="false" value="New..." position="5.0 1.0 0" onclick="atlasMapAdmNew()"></a-button>      
              <a-button value="delete" position="5.3 0.3 0" onclick="deleteConfigActivity()"></a-button>      
            </a-entity>
          </a-form>

          <a-form handgrip="active: false" id="ui-config-map-activity" position="-1 -1.25 -2" active="false">
            <a-plane-rounded position=".075 -.1 0" id="3d-config-activity" opacity=".5" width="1.8" height=".19" radius="0.05" color="grey">
            </a-plane-rounded>
            <a-entity scale=".3 .3 .3" position=".075 -.1 0" >
              <a-button value="delete" position="5.3 0.3 0" onclick="deleteConfigActivity()"></a-button>      
            </a-entity>
          </a-form>

          <a-form handgrip="active: false" id="ui-config-convert-body" position="-1 -1.25 -2" active="false">
            <a-plane-rounded position=".075 -.1 0" id="3d-config-activity" opacity=".5" width="1.8" height=".19" radius="0.05" color="grey">
            </a-plane-rounded>
            <a-entity scale=".3 .3 .3" position=".075 -.1 0" >
              <a-text scale="1 1 1" position=".8 0.32 .01" value="to type:"></a-text>
              <a-textinput scale="2.5 2.5 2.5" position="3 0.3 .01" cols="20" content="somethingString" hide="false"></a-textinput>
              <a-button value="delete" position="5.3 0.3 0" onclick="deleteConfigActivity()"></a-button>      
            </a-entity>
          </a-form>

          <a-form handgrip="active: false" id="ui-config-remove-headers" position="-1 -1.25 -2" active="false">
            <a-plane-rounded position=".075 -.1 0" id="3d-config-activity" opacity=".5" width="1.8" height=".19" radius="0.05" color="grey">
            </a-plane-rounded>
            <a-entity scale=".3 .3 .3" position=".075 -.1 0" >
              <a-text scale="1 1 1" position=".8 0.32 .01" value="Pattern:"></a-text>
              <a-textinput scale="2.5 2.5 2.5" position="3 0.3 .01" cols="20" content="somethingString" hide="false"></a-textinput>
              <a-button value="delete" position="5.3 0.3 0" onclick="deleteConfigActivity()"></a-button>      
            </a-entity>
          </a-form>

          <a-form handgrip="active: false" id="3d-config-processor" position="-1 -1.25 -2" active="false">
            <a-plane-rounded position=".075 -.1 0" id="3d-config-activity" opacity=".5" width="1.8" height=".19" radius="0.05" color="grey">
            </a-plane-rounded>
            <a-entity scale=".3 .3 .3" position=".075 -.1 0" >
              <a-text scale="1 1 1" position=".7 0.32 .01" value="processor:"></a-text>
              <a-textinput scale="2.5 2.5 2.5" position="3.2 0.3 .01" cols="20" content="somethingString" hide="false"></a-textinput>
              <a-button value="delete" position="5.3 0.3 0" onclick="deleteConfigActivity()"></a-button>      
            </a-entity>
          </a-form>
    `;

    document.getElementById('main-camera').insertAdjacentHTML('beforeend', html);
  </script>

  <script>

      var scene = document.querySelector('a-scene');

      if (scene.hasLoaded) {
        run();
      } else {
        scene.addEventListener('loaded', run);
      }

      function run () {
        createMenu3D()
        createMenu3Dcontrol()
        createNavigationControl()
      }

      scene.addEventListener('enter-vr', function () {
    
        //the menu positioning depends on the view mode (VR on/off)
        //in VR mode we want the menu in a more centered position
        let menu3D = document.getElementById('handle')

        //keep reference to camera
        var camera = document.getElementById("main-camera");
        //obtain camera component
        let cam = camera.components.camera.camera; 

        //define the distance where the menu will be placed
        //and calculate viewable height and width in browser window 
        let distance = 4
        var height = 2 * distance * Math.tan(cam.fov / 2 / 180 * Math.PI);
        var width = height * cam.aspect;

        //calculate percentage position where the menu will be placed
        height = height/2 * .5
        width = width/2 * .2

        handle.setAttribute('position', -width/2+' '+height/2+' -3')
        handle.setAttribute('scale', '.5 .5 .5')
      });

  </script>
</html>
